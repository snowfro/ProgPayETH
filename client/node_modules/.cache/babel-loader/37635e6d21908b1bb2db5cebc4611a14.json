{"ast":null,"code":"var _jsxFileName = \"/Users/erick/eth/progpay/client/src/ShowPaymentTable.js\";\nimport React from \"react\";\nimport Web3 from 'web3';\nconst web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n\nclass ShowPaymentTable extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      paymentIndexes: []\n    };\n  }\n\n  componentDidMount() {\n    const {\n      drizzle\n    } = this.props;\n    const contract = drizzle.contracts.ProgPayETH;\n    let paymentIndexes = [];\n\n    for (let i = 0; i < this.props.numberOfPayments; i++) {\n      const paymentIndex = contract.methods[\"paymentNumberToValue\"].cacheCall(i + 1);\n      const requestedIndex = contract.methods[\"paymentNumberToRequested\"].cacheCall(i + 1);\n      const approvedIndex = contract.methods[\"paymentNumberToApproved\"].cacheCall(i + 1);\n      paymentIndexes.push({\n        paymentIndex,\n        requestedIndex,\n        approvedIndex\n      });\n    }\n\n    this.setState({\n      paymentIndexes\n    });\n  }\n\n  render() {\n    const {\n      ProgPayETH\n    } = this.props.drizzleState.contracts;\n    let paymentDetails = {}; //console.log(this.state.paymentIndexes);\n\n    paymentDetails = this.state.paymentIndexes.map(x => {\n      let rObj = {};\n      rObj['paymentValue'] = ProgPayETH.paymentNumberToValue[x.paymentIndex];\n      rObj['requested'] = ProgPayETH.paymentNumberToRequested[x.requestedIndex];\n      rObj['approved'] = ProgPayETH.paymentNumberToApproved[x.approvedIndex];\n      return rObj; //return {ProgPayETH.paymentNumberToValue[x.paymentIndex],ProgPayETH.paymentNumberToRequested[x.requestedIndex], ProgPayETH.paymentNumberToApproved[x.approvedIndex]}\n    });\n    console.log(paymentDetails);\n    console.log(\"num \" + this.props.numberOfPayments);\n    console.log(\"tot \" + this.props.contractValue);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 7\n      }\n    }, paymentDetails.map(function (payment, index) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 28\n        }\n      }, \"Payment #\", index + 1, \" in the amount of \", payment.paymentValue && parseFloat(web3.utils.fromWei(payment.paymentValue.value.toString(), 'ether')).toFixed(3), \"\\u039E\", payment.requested && (payment.requested.value === false ? \" has not been requested.\" : payment.approved && payment.approved.value === true ? \" has been requested and paid!\" : \" has been requested and is awaiting approval/payment.\"), \" \");\n    }));\n  }\n\n}\n\nexport default ShowPaymentTable;","map":{"version":3,"sources":["/Users/erick/eth/progpay/client/src/ShowPaymentTable.js"],"names":["React","Web3","web3","givenProvider","ShowPaymentTable","Component","state","paymentIndexes","componentDidMount","drizzle","props","contract","contracts","ProgPayETH","i","numberOfPayments","paymentIndex","methods","cacheCall","requestedIndex","approvedIndex","push","setState","render","drizzleState","paymentDetails","map","x","rObj","paymentNumberToValue","paymentNumberToRequested","paymentNumberToApproved","console","log","contractValue","payment","index","paymentValue","parseFloat","utils","fromWei","value","toString","toFixed","requested","approved"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\n\nimport Web3 from 'web3';\nconst web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n\nclass ShowPaymentTable extends React.Component {\n\nstate = {paymentIndexes:[]};\n\n\n componentDidMount() {\n\n    const { drizzle } = this.props;\n    const contract = drizzle.contracts.ProgPayETH;\n    let paymentIndexes = [];\n\n    for (let i=0; i<this.props.numberOfPayments; i++){\n      const paymentIndex = contract.methods[\"paymentNumberToValue\"].cacheCall(i+1);\n      const requestedIndex = contract.methods[\"paymentNumberToRequested\"].cacheCall(i+1);\n      const approvedIndex = contract.methods[\"paymentNumberToApproved\"].cacheCall(i+1);\n      paymentIndexes.push({paymentIndex, requestedIndex, approvedIndex});\n    }\n\n    this.setState({paymentIndexes});\n\n }\n\n\nrender() {\n\nconst { ProgPayETH } = this.props.drizzleState.contracts;\nlet paymentDetails = {};\n//console.log(this.state.paymentIndexes);\npaymentDetails = this.state.paymentIndexes.map(x=>{\n  let rObj = {};\n  rObj['paymentValue'] = ProgPayETH.paymentNumberToValue[x.paymentIndex];\n  rObj['requested'] = ProgPayETH.paymentNumberToRequested[x.requestedIndex];\n  rObj['approved'] = ProgPayETH.paymentNumberToApproved[x.approvedIndex];\n  return rObj;\n  //return {ProgPayETH.paymentNumberToValue[x.paymentIndex],ProgPayETH.paymentNumberToRequested[x.requestedIndex], ProgPayETH.paymentNumberToApproved[x.approvedIndex]}\n});\nconsole.log(paymentDetails);\nconsole.log(\"num \"+this.props.numberOfPayments);\nconsole.log(\"tot \"+this.props.contractValue);\n\n    return (\n\n      <div>\n                {paymentDetails.map(function(payment, index){\n                    return <p key={index}>Payment #{index+1} in the amount of {payment.paymentValue && parseFloat((web3.utils.fromWei((payment.paymentValue.value).toString(), 'ether'))).toFixed(3)}Îž\n                     {payment.requested && (payment.requested.value===false?\" has not been requested.\": payment.approved && (payment.approved.value===true)?\" has been requested and paid!\":\" has been requested and is awaiting approval/payment.\")} {}</p>;\n                  })}\n    </div>\n\n    );\n  }\n}\n\nexport default ShowPaymentTable;\n"]},"metadata":{},"sourceType":"module"}