{"ast":null,"code":"var _jsxFileName = \"/Users/erick/eth/progpay/client/src/Main.js\";\nimport React from 'react';\nimport bytecode from './bytecode.js';\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      payer: undefined,\n      payerIsAddress: null,\n      payee: null,\n      payeeIsAddress: null,\n      contractValueInWei: null,\n      numberOfPayments: null,\n      dissolveDelayInSeconds: null,\n      contractAddress: null,\n      deployed: false\n    };\n  }\n\n  handlePayerInput(event) {\n    if (this.props.drizzle.web3.utils.isAddress(event.target.value)) {\n      this.setState({\n        payer: event.target.value,\n        payerIsAddress: true\n      });\n    } else {\n      this.setState({\n        payerIsAddress: false\n      });\n      console.log(\"PAYER ADDRESS NOT AN ETHEREUM ADDRESS\");\n    } //console.log(this.state.payer);\n\n  }\n\n  handlePayeeInput(event) {\n    if (this.props.drizzle.web3.utils.isAddress(event.target.value)) {\n      this.setState({\n        payee: event.target.value,\n        payeeIsAddress: true\n      });\n    } else {\n      this.setState({\n        payeeIsAddress: false\n      });\n      console.log(\"PAYEE ADDRESS NOT AN ETHEREUM ADDRESS\");\n    } //console.log(this.state.payee);\n\n  }\n\n  handleValueInput(event) {\n    const {\n      web3\n    } = this.props.drizzle;\n    const valueInETH = event.target.value;\n    const valueInWei = web3.utils.toWei(valueInETH.toString(), 'ether');\n    this.setState({\n      contractValueInWei: valueInWei\n    }); //console.log(valueInWei);\n  }\n\n  handleNumberOfPaymentsInput(event) {\n    this.setState({\n      numberOfPayments: event.target.value\n    }); //console.log(this.state.payee);\n  }\n\n  handleDissolveDelayInput(event) {\n    const delayInDays = event.target.value;\n    const delayInSeconds = delayInDays * 24 * 60 * 60;\n    this.setState({\n      dissolveDelayInSeconds: delayInSeconds\n    });\n  }\n\n  handleDeployContract() {\n    var contractAddress;\n    var deployed = false;\n    const {\n      drizzle\n    } = this.props;\n    console.log(drizzle);\n    const {\n      web3\n    } = drizzle;\n    console.log(web3);\n    const progPayETHContract = new web3.eth.Contract(this.props.options.contracts[0].abi, {\n      data: bytecode\n    });\n    console.log(progPayETHContract);\n    let args = [this.state.payer, this.state.payee, this.state.contractValueInWei, this.state.numberOfPayments, this.state.dissolveDelayInSeconds];\n    web3.eth.getAccounts().then(e => {\n      var that = this;\n      progPayETHContract.deploy({\n        arguments: args\n      }).send({\n        from: e[0]\n      }).then(function (newContractInstance) {\n        that.setState({\n          deployed: true,\n          contractAddress: newContractInstance.options.address\n        });\n        console.log(newContractInstance.options.address); // instance with the new contract address\n      });\n      ;\n    }); //web3.eth.getAccounts().then(e => {let firstAcc=e[0]; console.log(firstAcc)});\n  }\n\n  render() {\n    console.log(this.state);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }\n    }, \"Welcome to the Ethereum Progress Payment dApp.\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 7\n      }\n    }, \"This is a 100% free utility used to establish a blockchain based digital payment contract for goods and services.\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    }, \"There are two parties. A \", /*#__PURE__*/React.createElement(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 35\n      }\n    }, \"Payer\"), \" and a \", /*#__PURE__*/React.createElement(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 54\n      }\n    }, \"Payee\"), \". An unfunded contract can be deployed by anyone as long as the following details are known in advance:\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }\n    }, \" Payer's Ethereum address\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, \" Payee's Ethereum address\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }\n    }, \" Total value of contract in ETH (\\u039E)\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }\n    }, \" Number of payments\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 7\n      }\n    }, \" Cooldown period in case only one party wants to dissolve the contract \")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }\n    }, \"Once you have that information simply fill in the details below using an Etherum compatible browser or extension and press deploy. The contract is initially deployed without any funds. In order to fund the contract the \", /*#__PURE__*/React.createElement(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 95\n      }\n    }, \"payer\"), \" must deposit the total value of the contract. Once funds are deposited they are locked into the contact terms so please verify all details in the contract after it is deployed but before it is funded!\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }\n    }, \"Please input contract terms below. Your contract address and a link to the dashboard will be shown after successful deployment.\"), !this.state.deployed && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      disabled: this.state.deployed ? true : false,\n      placeholder: \"Payer Address 0x000...\",\n      onChange: this.handlePayerInput.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      disabled: this.state.deployed ? true : false,\n      placeholder: \"Payee Address 0x000...\",\n      onChange: this.handlePayeeInput.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      disabled: this.state.deployed ? true : false,\n      placeholder: \"Contract Total Value \\u039E\",\n      onChange: this.handleValueInput.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      disabled: this.state.deployed ? true : false,\n      placeholder: \"Total Payments\",\n      onChange: this.handleNumberOfPaymentsInput.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      disabled: this.state.deployed ? true : false,\n      placeholder: \"Dissolve Delay in Days\",\n      onChange: this.handleDissolveDelayInput.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleDeployContract.bind(this),\n      disabled: this.state.payer && this.state.payee && this.state.contractValueInWei && this.state.numberOfPayments && this.state.dissolveDelayInSeconds ? false : true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, \"Deploy\")), this.state.payerIsAddress === false && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    }, \"Warning: Payer address input is not a valid Ethereum address.\"), this.state.payeeIsAddress === false && /*#__PURE__*/React.createElement(\"p\", {\n      style: \"color:red\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }\n    }, \"Warning: Payee address input is not a valid Ethereum address.\"), this.state.deployed && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 5\n      }\n    }, \" Congrats! Your contract has been successfully deployed!\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 5\n      }\n    }, \" Here are your contract details:\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 5\n      }\n    }, \"Payer: \", this.state.payer), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 5\n      }\n    }, \"Payee: \", this.state.payee), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 5\n      }\n    }, \"Contract Value: \", parseFloat(this.props.drizzle.web3.utils.fromWei(this.state.contractValueInWei.toString(), 'ether')).toFixed(3), \"\\u039E\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 5\n      }\n    }, \"Number of Payments: \", this.state.numberOfPayments), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 5\n      }\n    }, \"Cool Down Timer: \", this.state.dissolveDelayInSeconds / 60 / 60 / 24, \" days\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 5\n      }\n    }, \"Your contract address is: \", this.state.contractAddress)));\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["/Users/erick/eth/progpay/client/src/Main.js"],"names":["React","bytecode","Main","Component","constructor","props","state","payer","undefined","payerIsAddress","payee","payeeIsAddress","contractValueInWei","numberOfPayments","dissolveDelayInSeconds","contractAddress","deployed","handlePayerInput","event","drizzle","web3","utils","isAddress","target","value","setState","console","log","handlePayeeInput","handleValueInput","valueInETH","valueInWei","toWei","toString","handleNumberOfPaymentsInput","handleDissolveDelayInput","delayInDays","delayInSeconds","handleDeployContract","progPayETHContract","eth","Contract","options","contracts","abi","data","args","getAccounts","then","e","that","deploy","arguments","send","from","newContractInstance","address","render","bind","parseFloat","fromWei","toFixed"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport bytecode from './bytecode.js';\n\nclass Main extends React.Component {\n  constructor(props){\n    super(props);\n    this.state={payer:undefined, payerIsAddress:null, payee:null, payeeIsAddress:null, contractValueInWei:null, numberOfPayments:null, dissolveDelayInSeconds:null, contractAddress:null, deployed:false};\n  }\n\n  handlePayerInput(event){\n    if (this.props.drizzle.web3.utils.isAddress(event.target.value)){\n    this.setState({payer:event.target.value, payerIsAddress:true});\n    } else {\n      this.setState({payerIsAddress:false})\n    console.log(\"PAYER ADDRESS NOT AN ETHEREUM ADDRESS\");\n  }\n    //console.log(this.state.payer);\n  }\n\n\n  handlePayeeInput(event){\n    if (this.props.drizzle.web3.utils.isAddress(event.target.value)){\n    this.setState({payee:event.target.value, payeeIsAddress:true});\n  } else {\n    this.setState({payeeIsAddress:false});\n    console.log(\"PAYEE ADDRESS NOT AN ETHEREUM ADDRESS\")\n  }\n    //console.log(this.state.payee);\n  }\n\n  handleValueInput(event){\n    const { web3 } = this.props.drizzle;\n    const valueInETH = event.target.value;\n    const valueInWei = web3.utils.toWei((valueInETH).toString(), 'ether');\n    this.setState({contractValueInWei:valueInWei});\n    //console.log(valueInWei);\n  }\n\n  handleNumberOfPaymentsInput(event){\n    this.setState({numberOfPayments:event.target.value});\n    //console.log(this.state.payee);\n  }\n\n  handleDissolveDelayInput(event){\n    const delayInDays = event.target.value;\n    const delayInSeconds = delayInDays * 24*60*60;\n    this.setState({dissolveDelayInSeconds:delayInSeconds});\n  }\n\n  handleDeployContract(){\n    var contractAddress;\n    var deployed = false;\n\n    const { drizzle } = this.props;\n    console.log(drizzle);\n    const { web3 } = drizzle;\n    console.log(web3);\n    const progPayETHContract = new web3.eth.Contract(this.props.options.contracts[0].abi, {data:bytecode});\n    console.log(progPayETHContract);\n    let args = [this.state.payer,this.state.payee,this.state.contractValueInWei,this.state.numberOfPayments,this.state.dissolveDelayInSeconds];\n\n    web3.eth.getAccounts().then((e) => {\n      var that = this;\n      progPayETHContract.deploy({arguments:args}).send({\n      from: e[0]\n\n  })\n  .then(function(newContractInstance){\n      that.setState({deployed:true, contractAddress:newContractInstance.options.address});\n      console.log(newContractInstance.options.address) // instance with the new contract address\n  });;\n\n\n\n    });\n\n\n    //web3.eth.getAccounts().then(e => {let firstAcc=e[0]; console.log(firstAcc)});\n\n\n  }\n\n\n  render(){\n\n    console.log(this.state);\n    return (\n<div>\n      <h3>Welcome to the Ethereum Progress Payment dApp.</h3>\n      <p>This is a 100% free utility used to establish a blockchain based digital payment contract for goods and services.</p>\n      <p>There are two parties. A <i>Payer</i> and a <i>Payee</i>. An unfunded contract can be deployed by anyone as long as the following details are known in advance:</p>\n      <ul>\n      <li> Payer's Ethereum address</li>\n      <li> Payee's Ethereum address</li>\n      <li> Total value of contract in ETH (Ξ)</li>\n      <li> Number of payments</li>\n      <li> Cooldown period in case only one party wants to dissolve the contract </li>\n      </ul>\n      <br/>\n      <p>Once you have that information simply fill in the details below using an Etherum compatible browser or extension and press deploy.\n      The contract is initially deployed without any funds. In order to fund the contract the <i>payer</i> must deposit the total value of the contract. Once funds are deposited\n      they are locked into the contact terms so please verify all details in the contract after it is deployed but before it is funded!</p>\n      <br/>\n      <p>Please input contract terms below. Your contract address and a link to the dashboard will be shown after successful deployment.</p>\n\n      {!this.state.deployed &&\n        <div>\n      <input type=\"text\" disabled={this.state.deployed?true:false} placeholder=\"Payer Address 0x000...\"  onChange={this.handlePayerInput.bind(this)}/>\n      <input type=\"text\" disabled={this.state.deployed?true:false} placeholder=\"Payee Address 0x000...\"  onChange={this.handlePayeeInput.bind(this)}/>\n      <input type=\"number\" disabled={this.state.deployed?true:false} placeholder=\"Contract Total Value Ξ\"  onChange={this.handleValueInput.bind(this)}/>\n      <input type=\"number\" disabled={this.state.deployed?true:false} placeholder=\"Total Payments\"  onChange={this.handleNumberOfPaymentsInput.bind(this)}/>\n      <input type=\"number\" disabled={this.state.deployed?true:false} placeholder=\"Dissolve Delay in Days\"  onChange={this.handleDissolveDelayInput.bind(this)}/>\n\n      <button onClick={this.handleDeployContract.bind(this)} disabled={(this.state.payer && this.state.payee && this.state.contractValueInWei && this.state.numberOfPayments && this.state.dissolveDelayInSeconds)?false:true}>Deploy</button>\n      </div>\n    }\n      {this.state.payerIsAddress===false &&\n      <p>Warning: Payer address input is not a valid Ethereum address.</p>}\n      {this.state.payeeIsAddress===false &&\n      <p style={\"color:red\"}>Warning: Payee address input is not a valid Ethereum address.</p>}\n\n\n    {this.state.deployed &&\n    <div>\n    <p> Congrats! Your contract has been successfully deployed!</p>\n    <p> Here are your contract details:</p>\n    <ul>\n    <li>Payer: {this.state.payer}</li>\n    <li>Payee: {this.state.payee}</li>\n    <li>Contract Value: {parseFloat((this.props.drizzle.web3.utils.fromWei((this.state.contractValueInWei).toString(), 'ether'))).toFixed(3)}Ξ</li>\n    <li>Number of Payments: {this.state.numberOfPayments}</li>\n    <li>Cool Down Timer: {this.state.dissolveDelayInSeconds/60/60/24} days</li>\n    </ul>\n    <br/>\n    <p>Your contract address is: {this.state.contractAddress}</p>\n    </div>\n    }\n    </div>\n    )\n  }\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}