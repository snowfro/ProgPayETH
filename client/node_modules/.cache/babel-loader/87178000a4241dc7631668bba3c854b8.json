{"ast":null,"code":"import _classCallCheck from\"/Users/erick/eth/progpay/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/erick/eth/progpay/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/erick/eth/progpay/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/erick/eth/progpay/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/erick/eth/progpay/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import ShowPaymentTable from\"./ShowPaymentTable\";import DissolveFunctions from\"./DissolveFunctions\";import Web3 from'web3';var web3=new Web3(Web3.givenProvider||\"http://localhost:8545\");var GetContractInfo=/*#__PURE__*/function(_React$Component){_inherits(GetContractInfo,_React$Component);var _super=_createSuper(GetContractInfo);function GetContractInfo(props){var _this;_classCallCheck(this,GetContractInfo);_this=_super.call(this,props);_this.state={dissolve:false};_this.handleInitialDeposit=_this.handleInitialDeposit.bind(_assertThisInitialized(_this));_this.handleDissolveFunctionsToggle=_this.handleDissolveFunctionsToggle.bind(_assertThisInitialized(_this));return _this;}_createClass(GetContractInfo,[{key:\"componentDidMount\",value:function componentDidMount(){//access drizzle props within componentDidMount\nvar drizzle=this.props.drizzle;var contract=drizzle.contracts.DynamicProgPayETH;var payeeIndex=contract.methods[\"payee\"].cacheCall();var payerIndex=contract.methods[\"payer\"].cacheCall();var contractValueIndex=contract.methods[\"contractValueInWei\"].cacheCall();var numberOfPaymentsIndex=contract.methods[\"numberOfPayments\"].cacheCall();var fundedIndex=contract.methods[\"contractFunded\"].cacheCall();var nextPaymentIndex=contract.methods[\"nextPayment\"].cacheCall();var remainingBalanceIndex=contract.methods[\"remainingBalance\"].cacheCall();var terminatedIndex=contract.methods[\"contractTerminated\"].cacheCall();this.setState({payeeIndex:payeeIndex,payerIndex:payerIndex,contractValueIndex:contractValueIndex,numberOfPaymentsIndex:numberOfPaymentsIndex,fundedIndex:fundedIndex,nextPaymentIndex:nextPaymentIndex,remainingBalanceIndex:remainingBalanceIndex,terminatedIndex:terminatedIndex});}},{key:\"handleDissolveFunctionsToggle\",value:function handleDissolveFunctionsToggle(){this.setState({dissolve:!this.state.dissolve});}},{key:\"handleInitialDeposit\",value:function handleInitialDeposit(){var _this$props=this.props,drizzle=_this$props.drizzle,drizzleState=_this$props.drizzleState;var contract=drizzle.contracts.DynamicProgPayETH;var contractValue=drizzleState.contracts.DynamicProgPayETH.contractValueInWei[this.state.contractValueIndex];var stackIdDep=contract.methods['initialDeposit'].cacheSend({from:drizzleState.accounts[0],value:contractValue.value});this.setState({stackIdDep:stackIdDep});}},{key:\"getStatusDep\",value:function getStatusDep(){var _this$props$drizzleSt=this.props.drizzleState,transactions=_this$props$drizzleSt.transactions,transactionStack=_this$props$drizzleSt.transactionStack;// get the transaction hash using our saved `stackId`\nvar txHash=transactionStack[this.state.stackIdDep];// if transaction hash does not exist, don't display anything\nif(!txHash)return null;if(transactions[txHash]){console.log(transactions[txHash].status);return transactions[txHash].status;}}},{key:\"render\",value:function render(){var _this$props2=this.props,drizzle=_this$props2.drizzle,drizzleState=_this$props2.drizzleState;var DynamicProgPayETH=this.props.drizzleState.contracts.DynamicProgPayETH;console.log(drizzle);console.log(drizzleState);//console.log(drizzle.contracts.DynamicProgPayETH.address);\nvar isPayer;var isPayee;//console.log(\"W3 \"+web3.version.api);\n//console.log(\"dissolve? \"+ this.state.dissolve);\n/*\n  let contractTxHash = drizzle.contracts.DynamicProgPayETH.contractArtifact.networks['5777'].transactionHash;\n  let dateTimeStamp;\n  let timeStampData = web3.eth.getTransaction(contractTxHash, (err, result) =>{\n    return result;\n  }).then((result)=>{\n    //console.log(result);\n    web3.eth.getBlock(result.blockNumber, (err, result) =>{\n      return result;\n    }).then((result)=>{\n      dateTimeStamp = \"was funded on \"+ new Date(result.timestamp*1000)+\".\";\n    });\n  });\n*/ //console.log(drizzleState);\nvar payee=DynamicProgPayETH.payee[this.state.payeeIndex];var payer=DynamicProgPayETH.payer[this.state.payerIndex];var contractValue=DynamicProgPayETH.contractValueInWei[this.state.contractValueIndex];var numberOfPayments=DynamicProgPayETH.numberOfPayments[this.state.numberOfPaymentsIndex];var contractFunded=DynamicProgPayETH.contractFunded[this.state.fundedIndex];var nextPayment=DynamicProgPayETH.nextPayment[this.state.nextPaymentIndex];var remainingBalance=DynamicProgPayETH.remainingBalance[this.state.remainingBalanceIndex];var terminated=DynamicProgPayETH.contractTerminated[this.state.terminatedIndex];if(nextPayment){//console.log(\"NP \"+nextPayment.value);\n}if(payer&&payee){isPayer=this.props.drizzleState.accounts[0]===payer.value;isPayee=this.props.drizzleState.accounts[0]===payee.value;//console.log(isPayer?\"Payer\":isPayee?\"Payee\":\"Neither Payer or Payee\");\n}var statusDep=this.getStatusDep();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",null,\"Progress Payment Contract Dashboard (\",drizzle.contracts.DynamicProgPayETH.address,\")\"),payer&&isPayer===true&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Looks like you are the payer on this contract! The payee is \",payee&&payee.value,\".\"),contractFunded&&contractFunded.value===false&&terminated&&terminated.value===false&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:this.handleInitialDeposit,disabled:statusDep===\"pending\"?true:false},!statusDep?'Fund Contract':statusDep===\"success\"?'Success!':statusDep))),payee&&isPayee===true&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Looks like you are the payee on this contract! The payer is \",payer&&payer.value,\".\")),/*#__PURE__*/React.createElement(\"p\",null,\"Contract initial value \",contractValue&&web3.utils.fromWei(contractValue.value.toString(),'ether'),\"\\u039E // \",numberOfPayments&&numberOfPayments.value,\" payments.\"),/*#__PURE__*/React.createElement(\"p\",null,\"Funded: \",contractFunded&&contractFunded.value===false?\"No\":\"Yes\"),/*#__PURE__*/React.createElement(\"p\",null,\"Status: \",terminated&&terminated.value===false?\"Active\":\"Terminated\"),nextPayment&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Next payment: \",nextPayment&&Number(nextPayment.value)===0?\"NONE\":nextPayment.value,\".\")),(contractFunded&&contractFunded.value===true||terminated&&terminated.value===true)&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Remaining balance to be paid on this contract: \",remainingBalance&&web3.utils.fromWei(remainingBalance.value.toString(),'ether'),\"\\u039E.\")),numberOfPayments&&contractFunded&&contractFunded.value===true&&/*#__PURE__*/React.createElement(ShowPaymentTable,{drizzle:this.props.drizzle,drizzleState:this.props.drizzleState,indexes:this.state,numberOfPayments:numberOfPayments.value,contractValue:contractValue.value}),this.state.dissolve&&contractFunded&&contractFunded.value===true&&/*#__PURE__*/React.createElement(DissolveFunctions,{drizzle:this.props.drizzle,drizzleState:this.props.drizzleState,indexes:this.state,nextPayment:nextPayment.value}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),contractFunded&&contractFunded.value===true&&/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleDissolveFunctionsToggle},this.state.dissolve?\"Hide Dissolve Functions\":\"Show Dissolve Functions\"));}}]);return GetContractInfo;}(React.Component);export default GetContractInfo;","map":{"version":3,"sources":["/Users/erick/eth/progpay/client/src/GetContractInfo.js"],"names":["React","ShowPaymentTable","DissolveFunctions","Web3","web3","givenProvider","GetContractInfo","props","state","dissolve","handleInitialDeposit","bind","handleDissolveFunctionsToggle","drizzle","contract","contracts","DynamicProgPayETH","payeeIndex","methods","cacheCall","payerIndex","contractValueIndex","numberOfPaymentsIndex","fundedIndex","nextPaymentIndex","remainingBalanceIndex","terminatedIndex","setState","drizzleState","contractValue","contractValueInWei","stackIdDep","cacheSend","from","accounts","value","transactions","transactionStack","txHash","console","log","status","isPayer","isPayee","payee","payer","numberOfPayments","contractFunded","nextPayment","remainingBalance","terminated","contractTerminated","statusDep","getStatusDep","address","utils","fromWei","toString","Number","Component"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\nimport ShowPaymentTable from \"./ShowPaymentTable\";\nimport DissolveFunctions from \"./DissolveFunctions\";\n\nimport Web3 from 'web3';\nconst web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n\nclass GetContractInfo extends React.Component {\n\nconstructor(props){\n  super(props);\n  this.state = {dissolve:false};\n  this.handleInitialDeposit = this.handleInitialDeposit.bind(this);\n  this.handleDissolveFunctionsToggle = this.handleDissolveFunctionsToggle.bind(this);\n}\n\n\n\n componentDidMount() {\n    //access drizzle props within componentDidMount\n    const {drizzle} = this.props;\n\n    const contract = drizzle.contracts.DynamicProgPayETH;\n\n\n    var payeeIndex = contract.methods[\"payee\"].cacheCall();\n    var payerIndex = contract.methods[\"payer\"].cacheCall();\n    var contractValueIndex = contract.methods[\"contractValueInWei\"].cacheCall();\n    var numberOfPaymentsIndex = contract.methods[\"numberOfPayments\"].cacheCall();\n    var fundedIndex = contract.methods[\"contractFunded\"].cacheCall();\n    var nextPaymentIndex = contract.methods[\"nextPayment\"].cacheCall();\n    var remainingBalanceIndex = contract.methods[\"remainingBalance\"].cacheCall();\n    var terminatedIndex = contract.methods[\"contractTerminated\"].cacheCall();\n\n    this.setState({payeeIndex, payerIndex, contractValueIndex, numberOfPaymentsIndex, fundedIndex, nextPaymentIndex, remainingBalanceIndex, terminatedIndex});\n }\n\nhandleDissolveFunctionsToggle(){\n  this.setState({dissolve:!this.state.dissolve});\n}\n\n\n handleInitialDeposit(){\n   const {drizzle, drizzleState} = this.props;\n   const contract = drizzle.contracts.DynamicProgPayETH;\n   const contractValue = drizzleState.contracts.DynamicProgPayETH.contractValueInWei[this.state.contractValueIndex];\n   const stackIdDep = contract.methods['initialDeposit'].cacheSend({from: drizzleState.accounts[0], value:contractValue.value});\n   this.setState({ stackIdDep });\n }\n\n\n getStatusDep(){\n   const { transactions, transactionStack } = this.props.drizzleState;\n   // get the transaction hash using our saved `stackId`\n   const txHash = transactionStack[this.state.stackIdDep];\n   // if transaction hash does not exist, don't display anything\n   if (!txHash) return null;\n\n   if (transactions[txHash]){\n   console.log(transactions[txHash].status);\n   return transactions[txHash].status;\n  }\n }\n\nrender() {\n  const { drizzle, drizzleState } = this.props;\n  const { DynamicProgPayETH } = this.props.drizzleState.contracts;\n  console.log(drizzle);\n  console.log(drizzleState);\n  //console.log(drizzle.contracts.DynamicProgPayETH.address);\n  let isPayer;\n  let isPayee;\n  //console.log(\"W3 \"+web3.version.api);\n  //console.log(\"dissolve? \"+ this.state.dissolve);\n\n/*\n  let contractTxHash = drizzle.contracts.DynamicProgPayETH.contractArtifact.networks['5777'].transactionHash;\n  let dateTimeStamp;\n  let timeStampData = web3.eth.getTransaction(contractTxHash, (err, result) =>{\n    return result;\n  }).then((result)=>{\n    //console.log(result);\n    web3.eth.getBlock(result.blockNumber, (err, result) =>{\n      return result;\n    }).then((result)=>{\n      dateTimeStamp = \"was funded on \"+ new Date(result.timestamp*1000)+\".\";\n    });\n  });\n*/\n\n\n\n  //console.log(drizzleState);\n  const payee = DynamicProgPayETH.payee[this.state.payeeIndex];\n  const payer = DynamicProgPayETH.payer[this.state.payerIndex];\n  const contractValue = DynamicProgPayETH.contractValueInWei[this.state.contractValueIndex];\n  const numberOfPayments = DynamicProgPayETH.numberOfPayments[this.state.numberOfPaymentsIndex];\n  const contractFunded = DynamicProgPayETH.contractFunded[this.state.fundedIndex];\n  const nextPayment = DynamicProgPayETH.nextPayment[this.state.nextPaymentIndex];\n  const remainingBalance = DynamicProgPayETH.remainingBalance[this.state.remainingBalanceIndex];\n  const terminated = DynamicProgPayETH.contractTerminated[this.state.terminatedIndex];\n\n  if (nextPayment){\n    //console.log(\"NP \"+nextPayment.value);\n  }\n\n  if (payer && payee){\n    isPayer = this.props.drizzleState.accounts[0]===payer.value;\n    isPayee = this.props.drizzleState.accounts[0]===payee.value;\n    //console.log(isPayer?\"Payer\":isPayee?\"Payee\":\"Neither Payer or Payee\");\n  }\n\n\n  let statusDep = this.getStatusDep();\n\n\n    return (\n      <div>\n      <h4>Progress Payment Contract Dashboard ({drizzle.contracts.DynamicProgPayETH.address})</h4>\n      {\n        payer && isPayer===true &&\n        <div>\n        <p>Looks like you are the payer on this contract! The payee is {payee && payee.value}.</p>\n        {contractFunded && contractFunded.value===false && terminated && terminated.value===false &&\n          <div>\n          <button className=\"btn btn-primary\" onClick={this.handleInitialDeposit} disabled = {statusDep===\"pending\"?true:false}>{!statusDep?'Fund Contract':statusDep===\"success\"?'Success!':statusDep}</button>\n          </div>\n        }\n        </div>\n      }\n      {\n        payee && isPayee===true &&\n        <div>\n        <p>Looks like you are the payee on this contract! The payer is {payer && payer.value}.</p>\n        </div>\n      }\n\n      <p>Contract initial value {contractValue && (web3.utils.fromWei((contractValue.value).toString(), 'ether'))}Ξ // {numberOfPayments && numberOfPayments.value} payments.</p>\n\n      <p>Funded: {contractFunded && contractFunded.value===false ?\"No\":\"Yes\"}</p>\n      <p>Status: {terminated && terminated.value===false?\"Active\":\"Terminated\"}</p>\n\n\n\n\n        {nextPayment &&\n          <div>\n          <p>Next payment: {nextPayment && Number(nextPayment.value)===0?\"NONE\":nextPayment.value}.</p>\n          </div>\n      }\n      {((contractFunded && contractFunded.value===true) || (terminated && terminated.value===true)) &&\n        <div>\n      <p>Remaining balance to be paid on this contract: {remainingBalance && (web3.utils.fromWei((remainingBalance.value).toString(), 'ether'))}Ξ.</p>\n        </div>\n    }\n\n\n    { numberOfPayments && contractFunded && contractFunded.value===true &&\n      <ShowPaymentTable\n      drizzle={this.props.drizzle}\n      drizzleState={this.props.drizzleState}\n      indexes={this.state}\n      numberOfPayments={numberOfPayments.value}\n      contractValue={contractValue.value}\n      />\n    }\n\n    { this.state.dissolve && contractFunded && contractFunded.value===true &&\n      <DissolveFunctions\n      drizzle={this.props.drizzle}\n      drizzleState={this.props.drizzleState}\n      indexes={this.state}\n      nextPayment={nextPayment.value}\n      />\n    }\n    <br/>\n    <br/>\n    { contractFunded && contractFunded.value===true &&\n    <button onClick={this.handleDissolveFunctionsToggle}>{this.state.dissolve?\"Hide Dissolve Functions\":\"Show Dissolve Functions\"}</button>\n    }\n      </div>\n    );\n  }\n}\n\nexport default GetContractInfo;\n"]},"metadata":{},"sourceType":"module"}