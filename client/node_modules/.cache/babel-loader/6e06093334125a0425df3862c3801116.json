{"ast":null,"code":"var _jsxFileName = \"/Users/erick/eth/progpay/client/src/ShowPaymentTable.js\";\nimport React from \"react\";\nimport Web3 from 'web3';\nconst web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n\nclass ShowPaymentTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      paymentIndexes: []\n    };\n    this.handleRequestPayment = this.handleRequestPayment.bind(this);\n    this.handleApprovePayment = this.handleApprovePayment.bind(this);\n  } //state = {};\n\n  /*\n  {\n    payee && isPayee===true &&\n    <div>\n    <button className=\"btn btn-primary\" onClick={this.handleRequestPayment} disabled = {statusReq===\"pending\"?true:false}>{!statusReq?'Request Next Payment':statusReq===\"success\"?'Success! Request another.':statusReq}</button>\n    </div>\n  }\n  {\n    <div>\n    payer && isPayer===true &&\n    <button className=\"btn btn-primary\" onClick={this.handleApprovePayment} disabled = {statusApp===\"pending\"?true:false}>{!statusApp?'Approve Next Payment':statusApp===\"success\"?'Success! Approve another.':statusApp}</button>\n    </div>\n  }*/\n\n\n  componentDidMount() {\n    const {\n      drizzle\n    } = this.props;\n    const contract = drizzle.contracts[this.props.contractId];\n    let paymentIndexes = [];\n\n    for (let i = 0; i < this.props.numberOfPayments; i++) {\n      const paymentIndex = contract.methods[\"paymentNumberToValue\"].cacheCall(i + 1);\n      const requestedIndex = contract.methods[\"paymentNumberToRequested\"].cacheCall(i + 1);\n      const approvedIndex = contract.methods[\"paymentNumberToApproved\"].cacheCall(i + 1);\n      paymentIndexes.push({\n        paymentIndex,\n        requestedIndex,\n        approvedIndex\n      });\n    }\n\n    this.setState({\n      paymentIndexes\n    });\n  }\n\n  handleRequestPayment() {\n    const {\n      drizzle,\n      drizzleState\n    } = this.props;\n    const contract = drizzle.contracts[this.props.contractId];\n    const stackIdReq = contract.methods['requestPayment'].cacheSend({\n      from: drizzleState.accounts[0],\n      value: 0\n    });\n    this.setState({\n      stackIdReq\n    });\n  }\n\n  handleApprovePayment() {\n    const {\n      drizzle,\n      drizzleState\n    } = this.props;\n    const contract = drizzle.contracts[this.props.contractId];\n    const stackIdApp = contract.methods['approvePayment'].cacheSend({\n      from: drizzleState.accounts[0],\n      value: 0\n    });\n    this.setState({\n      stackIdApp\n    });\n  }\n\n  getStatusReq() {\n    const {\n      transactions,\n      transactionStack\n    } = this.props.drizzleState; // get the transaction hash using our saved `stackId`\n\n    const txHash = transactionStack[this.state.stackIdReq]; // if transaction hash does not exist, don't display anything\n\n    if (!txHash) return null;\n\n    if (transactions[txHash]) {\n      console.log(transactions[txHash].status);\n      return transactions[txHash].status;\n    }\n  }\n\n  getStatusApp() {\n    const {\n      transactions,\n      transactionStack\n    } = this.props.drizzleState; // get the transaction hash using our saved `stackId`\n\n    const txHash = transactionStack[this.state.stackIdApp]; // if transaction hash does not exist, don't display anything\n\n    if (!txHash) return null;\n\n    if (transactions[txHash]) {\n      console.log(transactions[txHash].status);\n      return transactions[txHash].status;\n    }\n  }\n\n  render() {\n    const {\n      drizzle\n    } = this.props;\n    const contract = this.props.drizzleState.contracts[this.props.contractId]; //console.log(drizzle);\n    //console.log(drizzleState);\n\n    console.log(drizzle.contracts[this.props.contractId].address);\n    let isPayer;\n    let isPayee;\n    const payee = contract.payee[this.props.indexes.payeeIndex];\n    const payer = contract.payer[this.props.indexes.payerIndex];\n    const nextPayment = contract.nextPayment['0x0']; //console.log(nextPayment && \"NPI \"+nextPayment.value);\n    //console.log('2 '+payee.value);\n    //console.log('2r '+payer.value);\n\n    if (payer) {\n      isPayer = this.props.drizzleState.accounts[0] === payer.value; //console.log(isPayer?\"Payer\":isPayee?\"Payee\":\"Neither Payer or Payee\");\n    }\n\n    if (payee) {\n      isPayee = this.props.drizzleState.accounts[0] === payee.value; //console.log(isPayer?\"Payer\":isPayee?\"Payee\":\"Neither Payer or Payee\");\n    }\n\n    let paymentDetails = {}; //console.log(this.state.paymentIndexes);\n\n    paymentDetails = this.state.paymentIndexes.map(x => {\n      let rObj = {};\n      rObj['paymentValue'] = contract.paymentNumberToValue[x.paymentIndex];\n      rObj['requested'] = contract.paymentNumberToRequested[x.requestedIndex];\n      rObj['approved'] = contract.paymentNumberToApproved[x.approvedIndex];\n      return rObj;\n    });\n    let statusReq = this.getStatusReq(); //console.log(\"SRQ \"+statusReq);\n\n    let statusApp = this.getStatusApp();\n    console.log(paymentDetails);\n    let numPayments = this.props.numberOfPayments;\n    let contractVal = this.props.contractValue;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 7\n      }\n    }, paymentDetails.map(function (payment, index) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"alert alert-scondary\",\n        role: \"alert\",\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 23\n        }\n      }, \"Payment #\", index + 1, \" in the amount of \", this.props.contractId === \"DynamicProgPayETH\" ? \"\" : \"$\", parseFloat(web3.utils.fromWei((contractVal / numPayments).toString(), 'ether')).toFixed(3), this.props.contractId === \"DynamicProgPayETH\" ? \"Ξ\" : \"\", payment.requested && (payment.requested.value === false ? \" has not been requested.   \" : payment.approved && payment.approved.value === true ? \" has been requested and paid!\" : \" has been requested and is awaiting approval/payment.   \"), payee && isPayee === true && nextPayment && Number(nextPayment.value) === index + 1 && payment.requested && payment.requested.value === false && /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-primary btn-sm\",\n        onClick: this.handleRequestPayment,\n        disabled: statusReq === \"pending\" ? true : false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 23\n        }\n      }, !statusReq ? 'Request' : statusReq === \"success\" ? 'Success!' : statusReq), payer && isPayer === true && nextPayment && Number(nextPayment.value) === index + 1 && payment.requested && payment.requested.value === true && /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-primary btn-sm\",\n        onClick: this.handleApprovePayment,\n        disabled: statusApp === \"pending\" ? true : false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 23\n        }\n      }, !statusApp ? 'Approve' : statusApp === \"success\" ? 'Success!' : statusApp));\n    }, this));\n  }\n\n}\n\nexport default ShowPaymentTable;","map":{"version":3,"sources":["/Users/erick/eth/progpay/client/src/ShowPaymentTable.js"],"names":["React","Web3","web3","givenProvider","ShowPaymentTable","Component","constructor","props","state","paymentIndexes","handleRequestPayment","bind","handleApprovePayment","componentDidMount","drizzle","contract","contracts","contractId","i","numberOfPayments","paymentIndex","methods","cacheCall","requestedIndex","approvedIndex","push","setState","drizzleState","stackIdReq","cacheSend","from","accounts","value","stackIdApp","getStatusReq","transactions","transactionStack","txHash","console","log","status","getStatusApp","render","address","isPayer","isPayee","payee","indexes","payeeIndex","payer","payerIndex","nextPayment","paymentDetails","map","x","rObj","paymentNumberToValue","paymentNumberToRequested","paymentNumberToApproved","statusReq","statusApp","numPayments","contractVal","contractValue","payment","index","parseFloat","utils","fromWei","toString","toFixed","requested","approved","Number"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\n\nimport Web3 from 'web3';\nconst web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n\nclass ShowPaymentTable extends React.Component {\n\nconstructor(props){\n  super(props);\n  this.state ={paymentIndexes:[]};\n  this.handleRequestPayment = this.handleRequestPayment.bind(this);\n  this.handleApprovePayment = this.handleApprovePayment.bind(this);\n}\n//state = {};\n/*\n{\n  payee && isPayee===true &&\n  <div>\n  <button className=\"btn btn-primary\" onClick={this.handleRequestPayment} disabled = {statusReq===\"pending\"?true:false}>{!statusReq?'Request Next Payment':statusReq===\"success\"?'Success! Request another.':statusReq}</button>\n  </div>\n}\n{\n  <div>\n  payer && isPayer===true &&\n  <button className=\"btn btn-primary\" onClick={this.handleApprovePayment} disabled = {statusApp===\"pending\"?true:false}>{!statusApp?'Approve Next Payment':statusApp===\"success\"?'Success! Approve another.':statusApp}</button>\n  </div>\n}*/\n\n componentDidMount() {\n\n    const { drizzle } = this.props;\n    const contract = drizzle.contracts[this.props.contractId];\n    let paymentIndexes = [];\n\n    for (let i=0; i<this.props.numberOfPayments; i++){\n      const paymentIndex = contract.methods[\"paymentNumberToValue\"].cacheCall(i+1);\n      const requestedIndex = contract.methods[\"paymentNumberToRequested\"].cacheCall(i+1);\n      const approvedIndex = contract.methods[\"paymentNumberToApproved\"].cacheCall(i+1);\n      paymentIndexes.push({paymentIndex, requestedIndex, approvedIndex});\n    }\n\n    this.setState({paymentIndexes});\n }\n\n handleRequestPayment(){\n   const {drizzle, drizzleState} = this.props;\n   const contract = drizzle.contracts[this.props.contractId];\n   const stackIdReq = contract.methods['requestPayment'].cacheSend({from: drizzleState.accounts[0], value:0});\n   this.setState({ stackIdReq });\n }\n\n handleApprovePayment(){\n   const {drizzle, drizzleState} = this.props;\n   const contract = drizzle.contracts[this.props.contractId];\n   const stackIdApp = contract.methods['approvePayment'].cacheSend({from: drizzleState.accounts[0], value:0});\n   this.setState({ stackIdApp });\n }\n\n getStatusReq(){\n   const { transactions, transactionStack } = this.props.drizzleState;\n   // get the transaction hash using our saved `stackId`\n   const txHash = transactionStack[this.state.stackIdReq];\n   // if transaction hash does not exist, don't display anything\n   if (!txHash) return null;\n\n   if (transactions[txHash]){\n   console.log(transactions[txHash].status);\n   return transactions[txHash].status;\n  }\n }\n\n getStatusApp(){\n   const { transactions, transactionStack } = this.props.drizzleState;\n   // get the transaction hash using our saved `stackId`\n   const txHash = transactionStack[this.state.stackIdApp];\n   // if transaction hash does not exist, don't display anything\n   if (!txHash) return null;\n\n   if (transactions[txHash]){\n   console.log(transactions[txHash].status);\n   return transactions[txHash].status;\n  }\n }\n\n\n\nrender() {\n\n  const { drizzle} = this.props;\n  const contract = this.props.drizzleState.contracts[this.props.contractId];\n  //console.log(drizzle);\n  //console.log(drizzleState);\n  console.log(drizzle.contracts[this.props.contractId].address);\n  let isPayer;\n  let isPayee;\n  const payee = contract.payee[this.props.indexes.payeeIndex];\n  const payer = contract.payer[this.props.indexes.payerIndex];\n  const nextPayment = contract.nextPayment['0x0'];\n\n  //console.log(nextPayment && \"NPI \"+nextPayment.value);\n  //console.log('2 '+payee.value);\n  //console.log('2r '+payer.value);\n\n  if (payer){\n    isPayer = this.props.drizzleState.accounts[0]===payer.value;\n    //console.log(isPayer?\"Payer\":isPayee?\"Payee\":\"Neither Payer or Payee\");\n  }\n\n  if (payee){\n    isPayee = this.props.drizzleState.accounts[0]===payee.value;\n    //console.log(isPayer?\"Payer\":isPayee?\"Payee\":\"Neither Payer or Payee\");\n  }\n\n\nlet paymentDetails = {};\n//console.log(this.state.paymentIndexes);\npaymentDetails = this.state.paymentIndexes.map(x=>{\n  let rObj = {};\n  rObj['paymentValue'] = contract.paymentNumberToValue[x.paymentIndex];\n  rObj['requested'] = contract.paymentNumberToRequested[x.requestedIndex];\n  rObj['approved'] = contract.paymentNumberToApproved[x.approvedIndex];\n  return rObj;\n});\n\nlet statusReq = this.getStatusReq();\n//console.log(\"SRQ \"+statusReq);\nlet statusApp = this.getStatusApp();\n\nconsole.log(paymentDetails);\nlet numPayments = this.props.numberOfPayments;\nlet contractVal = this.props.contractValue;\n\n    return (\n\n      <div>\n\n                {paymentDetails.map(function(payment, index){\n                    return (\n\n                      <div className=\"alert alert-scondary\" role=\"alert\" key={index}>Payment #{index+1} in the amount of {this.props.contractId===\"DynamicProgPayETH\"?\"\":\"$\"}{parseFloat((web3.utils.fromWei((contractVal/numPayments).toString(), 'ether'))).toFixed(3)}{this.props.contractId===\"DynamicProgPayETH\"?\"Ξ\":\"\"}\n                     {payment.requested && (payment.requested.value===false?\" has not been requested.   \": payment.approved && (payment.approved.value===true)?\" has been requested and paid!\":\" has been requested and is awaiting approval/payment.   \")}\n\n                    {\n                      payee && isPayee===true && nextPayment && Number(nextPayment.value)===index+1 && payment.requested && payment.requested.value===false &&\n                      <button className=\"btn btn-primary btn-sm\" onClick={this.handleRequestPayment} disabled = {statusReq===\"pending\"?true:false}>{!statusReq?'Request':statusReq===\"success\"?'Success!':statusReq}</button>\n                    }\n                    {\n                      payer && isPayer===true && nextPayment && Number(nextPayment.value)===index+1 && payment.requested && payment.requested.value===true &&\n                      <button className=\"btn btn-primary btn-sm\" onClick={this.handleApprovePayment} disabled = {statusApp===\"pending\"?true:false}>{!statusApp?'Approve':statusApp===\"success\"?'Success!':statusApp}</button>\n                    }\n                    </div>\n                  \n                  )\n\n\n                }, this)}\n    </div>\n\n    );\n  }\n}\n\nexport default ShowPaymentTable;\n"]},"metadata":{},"sourceType":"module"}