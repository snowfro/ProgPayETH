{"ast":null,"code":"import _classCallCheck from\"/Users/erick/eth/progpay/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/erick/eth/progpay/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/erick/eth/progpay/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/erick/eth/progpay/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/erick/eth/progpay/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import Web3 from'web3';var web3=new Web3(Web3.givenProvider||\"http://localhost:8545\");var ShowPaymentTable=/*#__PURE__*/function(_React$Component){_inherits(ShowPaymentTable,_React$Component);var _super=_createSuper(ShowPaymentTable);function ShowPaymentTable(props){var _this;_classCallCheck(this,ShowPaymentTable);_this=_super.call(this,props);_this.state={paymentIndexes:[]};_this.handleRequestPayment=_this.handleRequestPayment.bind(_assertThisInitialized(_this));_this.handleApprovePayment=_this.handleApprovePayment.bind(_assertThisInitialized(_this));return _this;}//state = {};\n/*\n{\n  payee && isPayee===true &&\n  <div>\n  <button className=\"btn btn-primary\" onClick={this.handleRequestPayment} disabled = {statusReq===\"pending\"?true:false}>{!statusReq?'Request Next Payment':statusReq===\"success\"?'Success! Request another.':statusReq}</button>\n  </div>\n}\n{\n  <div>\n  payer && isPayer===true &&\n  <button className=\"btn btn-primary\" onClick={this.handleApprovePayment} disabled = {statusApp===\"pending\"?true:false}>{!statusApp?'Approve Next Payment':statusApp===\"success\"?'Success! Approve another.':statusApp}</button>\n  </div>\n}*/_createClass(ShowPaymentTable,[{key:\"componentDidMount\",value:function componentDidMount(){var drizzle=this.props.drizzle;var contract=drizzle.contracts.DynamicProgPayETH;var paymentIndexes=[];for(var i=0;i<this.props.numberOfPayments;i++){var paymentIndex=contract.methods[\"paymentNumberToValue\"].cacheCall(i+1);var requestedIndex=contract.methods[\"paymentNumberToRequested\"].cacheCall(i+1);var approvedIndex=contract.methods[\"paymentNumberToApproved\"].cacheCall(i+1);paymentIndexes.push({paymentIndex:paymentIndex,requestedIndex:requestedIndex,approvedIndex:approvedIndex});}this.setState({paymentIndexes:paymentIndexes});}},{key:\"handleRequestPayment\",value:function handleRequestPayment(){var _this$props=this.props,drizzle=_this$props.drizzle,drizzleState=_this$props.drizzleState;var contract=drizzle.contracts.DynamicProgPayETH;var stackIdReq=contract.methods['requestPayment'].cacheSend({from:drizzleState.accounts[0],value:0});this.setState({stackIdReq:stackIdReq});}},{key:\"handleApprovePayment\",value:function handleApprovePayment(){var _this$props2=this.props,drizzle=_this$props2.drizzle,drizzleState=_this$props2.drizzleState;var contract=drizzle.contracts.DynamicProgPayETH;var stackIdApp=contract.methods['approvePayment'].cacheSend({from:drizzleState.accounts[0],value:0});this.setState({stackIdApp:stackIdApp});}},{key:\"getStatusReq\",value:function getStatusReq(){var _this$props$drizzleSt=this.props.drizzleState,transactions=_this$props$drizzleSt.transactions,transactionStack=_this$props$drizzleSt.transactionStack;// get the transaction hash using our saved `stackId`\nvar txHash=transactionStack[this.state.stackIdReq];// if transaction hash does not exist, don't display anything\nif(!txHash)return null;if(transactions[txHash]){console.log(transactions[txHash].status);return transactions[txHash].status;}}},{key:\"getStatusApp\",value:function getStatusApp(){var _this$props$drizzleSt2=this.props.drizzleState,transactions=_this$props$drizzleSt2.transactions,transactionStack=_this$props$drizzleSt2.transactionStack;// get the transaction hash using our saved `stackId`\nvar txHash=transactionStack[this.state.stackIdApp];// if transaction hash does not exist, don't display anything\nif(!txHash)return null;if(transactions[txHash]){console.log(transactions[txHash].status);return transactions[txHash].status;}}},{key:\"render\",value:function render(){var drizzle=this.props.drizzle;var DynamicProgPayETH=this.props.drizzleState.contracts.DynamicProgPayETH;//console.log(drizzle);\n//console.log(drizzleState);\nconsole.log(drizzle.contracts.DynamicProgPayETH.address);var isPayer;var isPayee;var payee=DynamicProgPayETH.payee[this.props.indexes.payeeIndex];var payer=DynamicProgPayETH.payer[this.props.indexes.payerIndex];var nextPayment=DynamicProgPayETH.nextPayment['0x0'];//console.log(nextPayment && \"NPI \"+nextPayment.value);\n//console.log('2 '+payee.value);\n//console.log('2r '+payer.value);\nif(payer||payee){isPayer=this.props.drizzleState.accounts[0]===payer.value;isPayee=this.props.drizzleState.accounts[0]===payee.value;//console.log(isPayer?\"Payer\":isPayee?\"Payee\":\"Neither Payer or Payee\");\n}var paymentDetails={};//console.log(this.state.paymentIndexes);\npaymentDetails=this.state.paymentIndexes.map(function(x){var rObj={};rObj['paymentValue']=DynamicProgPayETH.paymentNumberToValue[x.paymentIndex];rObj['requested']=DynamicProgPayETH.paymentNumberToRequested[x.requestedIndex];rObj['approved']=DynamicProgPayETH.paymentNumberToApproved[x.approvedIndex];return rObj;//return {DynamicProgPayETH.paymentNumberToValue[x.paymentIndex],DynamicProgPayETH.paymentNumberToRequested[x.requestedIndex], DynamicProgPayETH.paymentNumberToApproved[x.approvedIndex]}\n});var statusReq=this.getStatusReq();//console.log(\"SRQ \"+statusReq);\nvar statusApp=this.getStatusApp();console.log(paymentDetails);var numPayments=this.props.numberOfPayments;var contractVal=this.props.contractValue;return/*#__PURE__*/React.createElement(\"div\",null,paymentDetails.map(function(payment,index){return/*#__PURE__*/React.createElement(\"div\",{key:index},/*#__PURE__*/React.createElement(\"p\",{key:index},\"Payment #\",index+1,\" in the amount of \",parseFloat(web3.utils.fromWei((contractVal/numPayments).toString(),'ether')).toFixed(3),\"\\u039E\",payment.requested&&(payment.requested.value===false?\" has not been requested.   \":payment.approved&&payment.approved.value===true?\" has been requested and paid!\":\" has been requested and is awaiting approval/payment.   \"),payee&&isPayee===true&&nextPayment&&Number(nextPayment.value)===index+1&&payment.requested&&payment.requested.value===false&&/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:this.handleRequestPayment,disabled:statusReq===\"pending\"?true:false},!statusReq?'Request':statusReq===\"success\"?'Success!':statusReq),payer&&isPayer===true&&nextPayment&&Number(nextPayment.value)===index+1&&payment.requested&&payment.requested.value===true&&/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:this.handleApprovePayment,disabled:statusApp===\"pending\"?true:false},!statusApp?'Approve':statusApp===\"success\"?'Success!':statusApp)));},this));}}]);return ShowPaymentTable;}(React.Component);export default ShowPaymentTable;","map":{"version":3,"sources":["/Users/erick/eth/progpay/client/src/ShowPaymentTable.js"],"names":["React","Web3","web3","givenProvider","ShowPaymentTable","props","state","paymentIndexes","handleRequestPayment","bind","handleApprovePayment","drizzle","contract","contracts","DynamicProgPayETH","i","numberOfPayments","paymentIndex","methods","cacheCall","requestedIndex","approvedIndex","push","setState","drizzleState","stackIdReq","cacheSend","from","accounts","value","stackIdApp","transactions","transactionStack","txHash","console","log","status","address","isPayer","isPayee","payee","indexes","payeeIndex","payer","payerIndex","nextPayment","paymentDetails","map","x","rObj","paymentNumberToValue","paymentNumberToRequested","paymentNumberToApproved","statusReq","getStatusReq","statusApp","getStatusApp","numPayments","contractVal","contractValue","payment","index","parseFloat","utils","fromWei","toString","toFixed","requested","approved","Number","Component"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\n\nimport Web3 from 'web3';\nconst web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n\nclass ShowPaymentTable extends React.Component {\n\nconstructor(props){\n  super(props);\n  this.state ={paymentIndexes:[]};\n  this.handleRequestPayment = this.handleRequestPayment.bind(this);\n  this.handleApprovePayment = this.handleApprovePayment.bind(this);\n}\n//state = {};\n/*\n{\n  payee && isPayee===true &&\n  <div>\n  <button className=\"btn btn-primary\" onClick={this.handleRequestPayment} disabled = {statusReq===\"pending\"?true:false}>{!statusReq?'Request Next Payment':statusReq===\"success\"?'Success! Request another.':statusReq}</button>\n  </div>\n}\n{\n  <div>\n  payer && isPayer===true &&\n  <button className=\"btn btn-primary\" onClick={this.handleApprovePayment} disabled = {statusApp===\"pending\"?true:false}>{!statusApp?'Approve Next Payment':statusApp===\"success\"?'Success! Approve another.':statusApp}</button>\n  </div>\n}*/\n\n componentDidMount() {\n\n    const { drizzle } = this.props;\n    const contract = drizzle.contracts.DynamicProgPayETH;\n    let paymentIndexes = [];\n\n    for (let i=0; i<this.props.numberOfPayments; i++){\n      const paymentIndex = contract.methods[\"paymentNumberToValue\"].cacheCall(i+1);\n      const requestedIndex = contract.methods[\"paymentNumberToRequested\"].cacheCall(i+1);\n      const approvedIndex = contract.methods[\"paymentNumberToApproved\"].cacheCall(i+1);\n      paymentIndexes.push({paymentIndex, requestedIndex, approvedIndex});\n    }\n\n    this.setState({paymentIndexes});\n }\n\n handleRequestPayment(){\n   const {drizzle, drizzleState} = this.props;\n   const contract = drizzle.contracts.DynamicProgPayETH;\n   const stackIdReq = contract.methods['requestPayment'].cacheSend({from: drizzleState.accounts[0], value:0});\n   this.setState({ stackIdReq });\n }\n\n handleApprovePayment(){\n   const {drizzle, drizzleState} = this.props;\n   const contract = drizzle.contracts.DynamicProgPayETH;\n   const stackIdApp = contract.methods['approvePayment'].cacheSend({from: drizzleState.accounts[0], value:0});\n   this.setState({ stackIdApp });\n }\n\n getStatusReq(){\n   const { transactions, transactionStack } = this.props.drizzleState;\n   // get the transaction hash using our saved `stackId`\n   const txHash = transactionStack[this.state.stackIdReq];\n   // if transaction hash does not exist, don't display anything\n   if (!txHash) return null;\n\n   if (transactions[txHash]){\n   console.log(transactions[txHash].status);\n   return transactions[txHash].status;\n  }\n }\n\n getStatusApp(){\n   const { transactions, transactionStack } = this.props.drizzleState;\n   // get the transaction hash using our saved `stackId`\n   const txHash = transactionStack[this.state.stackIdApp];\n   // if transaction hash does not exist, don't display anything\n   if (!txHash) return null;\n\n   if (transactions[txHash]){\n   console.log(transactions[txHash].status);\n   return transactions[txHash].status;\n  }\n }\n\n\n\nrender() {\n\n  const { drizzle} = this.props;\n  const { DynamicProgPayETH } = this.props.drizzleState.contracts;\n  //console.log(drizzle);\n  //console.log(drizzleState);\n  console.log(drizzle.contracts.DynamicProgPayETH.address);\n  let isPayer;\n  let isPayee;\n  const payee = DynamicProgPayETH.payee[this.props.indexes.payeeIndex];\n  const payer = DynamicProgPayETH.payer[this.props.indexes.payerIndex];\n  const nextPayment = DynamicProgPayETH.nextPayment['0x0'];\n\n  //console.log(nextPayment && \"NPI \"+nextPayment.value);\n  //console.log('2 '+payee.value);\n  //console.log('2r '+payer.value);\n\n  if (payer || payee){\n    isPayer = this.props.drizzleState.accounts[0]===payer.value;\n    isPayee = this.props.drizzleState.accounts[0]===payee.value;\n    //console.log(isPayer?\"Payer\":isPayee?\"Payee\":\"Neither Payer or Payee\");\n  }\n\n\nlet paymentDetails = {};\n//console.log(this.state.paymentIndexes);\npaymentDetails = this.state.paymentIndexes.map(x=>{\n  let rObj = {};\n  rObj['paymentValue'] = DynamicProgPayETH.paymentNumberToValue[x.paymentIndex];\n  rObj['requested'] = DynamicProgPayETH.paymentNumberToRequested[x.requestedIndex];\n  rObj['approved'] = DynamicProgPayETH.paymentNumberToApproved[x.approvedIndex];\n  return rObj;\n  //return {DynamicProgPayETH.paymentNumberToValue[x.paymentIndex],DynamicProgPayETH.paymentNumberToRequested[x.requestedIndex], DynamicProgPayETH.paymentNumberToApproved[x.approvedIndex]}\n});\n\nlet statusReq = this.getStatusReq();\n//console.log(\"SRQ \"+statusReq);\nlet statusApp = this.getStatusApp();\n\nconsole.log(paymentDetails);\nlet numPayments = this.props.numberOfPayments;\nlet contractVal = this.props.contractValue;\n\n    return (\n\n      <div>\n\n                {paymentDetails.map(function(payment, index){\n                    return (\n                      <div key={index}>\n                      <p key={index}>Payment #{index+1} in the amount of {parseFloat((web3.utils.fromWei((contractVal/numPayments).toString(), 'ether'))).toFixed(3)}Ξ\n                     {payment.requested && (payment.requested.value===false?\" has not been requested.   \": payment.approved && (payment.approved.value===true)?\" has been requested and paid!\":\" has been requested and is awaiting approval/payment.   \")}\n\n                    {\n                      payee && isPayee===true && nextPayment && Number(nextPayment.value)===index+1 && payment.requested && payment.requested.value===false &&\n                      <button className=\"btn btn-primary\" onClick={this.handleRequestPayment} disabled = {statusReq===\"pending\"?true:false}>{!statusReq?'Request':statusReq===\"success\"?'Success!':statusReq}</button>\n                    }\n                    {\n                      payer && isPayer===true && nextPayment && Number(nextPayment.value)===index+1 && payment.requested && payment.requested.value===true &&\n                      <button className=\"btn btn-primary\" onClick={this.handleApprovePayment} disabled = {statusApp===\"pending\"?true:false}>{!statusApp?'Approve':statusApp===\"success\"?'Success!':statusApp}</button>\n                    }\n                    </p>\n                    </div>\n                  )\n\n\n                }, this)}\n    </div>\n\n    );\n  }\n}\n\nexport default ShowPaymentTable;\n"]},"metadata":{},"sourceType":"module"}