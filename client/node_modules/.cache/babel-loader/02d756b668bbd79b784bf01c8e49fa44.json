{"ast":null,"code":"var _jsxFileName = \"/Users/erick/eth/progpay/client/src/Main.js\";\nimport React from 'react';\nimport \"./app.css\";\nimport HowItWorks from './HowItWorks';\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      payer: undefined,\n      payerIsAddress: null,\n      payee: null,\n      payeeIsAddress: null,\n      contractValueInWei: null,\n      numberOfPayments: null,\n      dissolveDelayInSeconds: null,\n      contractAddress: null,\n      deployed: false,\n      howItWorks: false,\n      currency: \"ETH\",\n      daiContract: null,\n      deployButtonDisabled: false\n    };\n    this.handleHowItWorks = this.handleHowItWorks.bind(this);\n    this.handleSetCurrency = this.handleSetCurrency.bind(this);\n  }\n\n  handleSetCurrency(event) {\n    console.log(event.target.value);\n    const {\n      drizzle\n    } = this.props;\n    console.log(drizzle);\n    const {\n      web3\n    } = drizzle;\n    console.log(web3);\n    let currency = event.target.value;\n    let daiContracts = {\n      1: \"0x6B175474E89094C44Da98b954EedeAC495271d0F\",\n      4: \"0x8ad3aA5d5ff084307d28C8f514D7a193B2Bfe725\",\n      5777: \"0x0f8a6B96b283a3DDE83ac93193e5022970baC2bE\"\n    }; //let { web3 } = this.props.drizzle;\n\n    web3.eth.net.getId().then(response => {\n      this.setState({\n        currency: currency,\n        daiContract: currency === \"DAI\" ? daiContracts[response] : null\n      });\n    }); //console.log(this.state.currency);\n  }\n\n  handlePayerInput(event) {\n    if (this.props.drizzle.web3.utils.isAddress(event.target.value)) {\n      this.setState({\n        payer: event.target.value,\n        payerIsAddress: true\n      });\n    } else {\n      this.setState({\n        payerIsAddress: false\n      });\n      console.log(\"PAYER ADDRESS NOT AN ETHEREUM ADDRESS\");\n    } //console.log(this.state.payer);\n\n  }\n\n  handleHowItWorks() {\n    this.setState({\n      howItWorks: !this.state.howItWorks\n    });\n  }\n\n  handlePayeeInput(event) {\n    if (this.props.drizzle.web3.utils.isAddress(event.target.value)) {\n      this.setState({\n        payee: event.target.value,\n        payeeIsAddress: true\n      });\n    } else {\n      this.setState({\n        payeeIsAddress: false\n      });\n      console.log(\"PAYEE ADDRESS NOT AN ETHEREUM ADDRESS\");\n    } //console.log(this.state.payee);\n\n  }\n\n  handleValueInput(event) {\n    const {\n      web3\n    } = this.props.drizzle;\n    const valueInETH = event.target.value;\n\n    if (!valueInETH) {\n      return;\n    } else {\n      const valueInWei = web3.utils.toWei(valueInETH.toString(), 'ether');\n      this.setState({\n        contractValueInWei: valueInWei\n      });\n      console.log(valueInWei);\n    }\n  }\n\n  handleNumberOfPaymentsInput(event) {\n    this.setState({\n      numberOfPayments: event.target.value\n    }); //console.log(this.state.payee);\n  }\n\n  handleDissolveDelayInput(event) {\n    const delayInDays = event.target.value;\n    const delayInSeconds = delayInDays * 24 * 60 * 60;\n    this.setState({\n      dissolveDelayInSeconds: delayInSeconds\n    });\n  }\n\n  handleDeployContract() {\n    const {\n      drizzle\n    } = this.props;\n    console.log(drizzle);\n    const {\n      web3\n    } = drizzle;\n    console.log(web3);\n    let contractIndex;\n    let args;\n\n    if (this.state.currency === \"ETH\") {\n      contractIndex = 0;\n      args = [this.state.payer, this.state.payee, this.state.contractValueInWei, this.state.numberOfPayments, this.state.dissolveDelayInSeconds];\n    } else if (this.state.currency === \"DAI\") {\n      if (!this.state.daiContract) {\n        alert(\"DecentPay DAI contracts can only be deployed on Mainnet and Rinkeby Networks\");\n        return;\n      }\n\n      contractIndex = 1;\n      args = [this.state.payer, this.state.payee, this.state.contractValueInWei, this.state.numberOfPayments, this.state.dissolveDelayInSeconds, this.state.daiContract];\n    }\n\n    const progPayContract = new web3.eth.Contract(this.props.options.contracts[contractIndex].abi, {\n      data: this.props.options.contracts[contractIndex].bytecode\n    });\n    console.log(progPayContract);\n    console.log(args);\n    web3.eth.getAccounts().then(e => {\n      var that = this;\n      progPayContract.deploy({\n        arguments: args\n      }).send({\n        from: e[0]\n      }).then(function (newContractInstance) {\n        that.setState({\n          deployed: true,\n          contractAddress: newContractInstance.options.address,\n          deployButtonDisabled: true\n        });\n        console.log(newContractInstance.options.address); // instance with the new contract address\n      }).catch(err => alert(\"Error: Not connected to Ethereum\"));\n    }); //web3.eth.getAccounts().then(e => {let firstAcc=e[0]; console.log(firstAcc)});\n  }\n\n  render() {\n    console.log(this.state.deployButtonDisabled);\n    console.log(this.state.currency);\n    console.log(this.state.daiContract);\n    console.log(this.props.drizzle); //console.log(\"opt \"+this.props.options.contracts[0].abi);\n\n    let contractURL = \"https://decentpay.app/\" + this.state.contractAddress;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"jumbotron\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 7\n      }\n    }, \"DecentPay\", /*#__PURE__*/React.createElement(\"small\", {\n      className: \"text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 7\n      }\n    }, \" simple transparent progress payments\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }\n    }, \"DecentPay is an \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.ethereum.org\",\n      target: \"_blank\",\n      rel: \"noreferrer noopener\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 26\n      }\n    }, \"Ethereum \"), \"powered payment utility that allows two parties to enter into a fully decentralized multi-payment contract.\"), !this.state.deployed && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-3 input-group-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      id: \"payer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }, \"Payer\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"0x.......\",\n      \"aria-label\": \"Payer\",\n      \"aria-describedby\": \"payer\",\n      disabled: this.state.deployed ? true : false,\n      onChange: this.handlePayerInput.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 7\n      }\n    })), this.state.payerIsAddress === false && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger p-1\",\n      role: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 7\n      }\n    }, \"Payer input is not a valid Ethereum address.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-3 input-group-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      id: \"payee\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }\n    }, \"Payee\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"0x.......\",\n      \"aria-label\": \"Payee\",\n      \"aria-describedby\": \"payee\",\n      disabled: this.state.deployed ? true : false,\n      onChange: this.handlePayeeInput.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 7\n      }\n    })), this.state.payeeIsAddress === false && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger p-1\",\n      role: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 7\n      }\n    }, \"Payee input is not a valid Ethereum address.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-3 input-group-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      id: \"value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, \"Contract Value \\xA0\\xA0\\xA0\\xA0\", this.state.currency === \"DAI\" ? \"$\" : \"\")), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control input-group-sm\",\n      placeholder: \"0\",\n      \"aria-label\": \"Contract Value\",\n      \"aria-describedby\": \"value\",\n      type: \"number\",\n      disabled: this.state.deployed ? true : false,\n      onChange: this.handleValueInput.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 7\n      }\n    }), this.state.currency === \"ETH\" && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-append\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }\n    }, \"\\u039E\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-3 input-group-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      id: \"numPay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }\n    }, \"Payments\")), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      placeholder: \"0\",\n      \"aria-label\": \"Contract Value\",\n      \"aria-describedby\": \"numPay\",\n      type: \"number\",\n      disabled: this.state.deployed ? true : false,\n      onChange: this.handleNumberOfPaymentsInput.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-3 input-group-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      id: \"dissolve\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }\n    }, \"Dissolve Delay\")), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      placeholder: \"Days\",\n      \"aria-label\": \"Contract Value\",\n      \"aria-describedby\": \"dissolve\",\n      type: \"number\",\n      disabled: this.state.deployed ? true : false,\n      onChange: this.handleDissolveDelayInput.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-check col-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"form-check-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"radio\",\n      name: \"CurrencyRadio\",\n      value: \"ETH\",\n      onChange: this.handleSetCurrency,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 7\n      }\n    }), \"Ethereum\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-check col-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"form-check-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"radio\",\n      name: \"CurrencyRadio\",\n      value: \"DAI\",\n      onChange: this.handleSetCurrency,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 7\n      }\n    }), \"DAI\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-check disabled col-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"radio\",\n      name: \"CurrencyRadio\",\n      value: \"USDC\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"form-check-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 7\n      }\n    }, \"USDc\")))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn shadow-lg btn-primary btn-lg btn-block\",\n      onClick: this.handleDeployContract.bind(this),\n      disabled: !(this.state.payer && this.state.payee && this.state.contractValueInWei && this.state.numberOfPayments && this.state.dissolveDelayInSeconds) || this.state.deployButtonDisabled ? true : false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 7\n      }\n    }, !this.state.deployButtonDisabled ? 'Deploy Contract' : 'Processing'), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 7\n      }\n    })), this.state.deployed && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 5\n      }\n    }, \" Congrats! Your contract has been successfully deployed!\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 5\n      }\n    }, \" Here are your contract details:\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 5\n      }\n    }, \"Currency: \", this.state.currency), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 5\n      }\n    }, \"Payer: \", this.state.payer), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 5\n      }\n    }, \"Payee: \", this.state.payee), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 5\n      }\n    }, \"Contract Value: \", this.state.currency === \"DAI\" ? \"$\" : \"\", parseFloat(this.props.drizzle.web3.utils.fromWei(this.state.contractValueInWei.toString(), 'ether')).toFixed(3), this.state.currency === \"ETH\" ? \"Ξ\" : \"\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 5\n      }\n    }, \"Number of Payments: \", this.state.numberOfPayments), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 5\n      }\n    }, \"Cool Down Timer: \", (this.state.dissolveDelayInSeconds / 60 / 60 / 24).toFixed(1).replace(/[.,]0$/, \"\"), \" day\", this.state.dissolveDelayInSeconds / 60 / 60 / 24 === 1 ? \"\" : \"s\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 5\n      }\n    }, \"Your contract address is: \", this.state.contractAddress), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 5\n      }\n    }, \"Both parties will interact with the contract using this dashboard link is: \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 83\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 88\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-primary btn-small\",\n      role: \"button\",\n      href: \"./\" + this.state.contractAddress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 93\n      }\n    }, contractURL)), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 8\n      }\n    }, \"Please copy the above infomation and store in a safe place!\"), \" Once you've done that follow the link above to start interacting with your contract.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-outline-primary btn-sm\",\n      onClick: this.handleHowItWorks,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 5\n      }\n    }, \"How It Works\")), this.state.howItWorks && /*#__PURE__*/React.createElement(HowItWorks, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }\n    }))));\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["/Users/erick/eth/progpay/client/src/Main.js"],"names":["React","HowItWorks","Main","Component","constructor","props","state","payer","undefined","payerIsAddress","payee","payeeIsAddress","contractValueInWei","numberOfPayments","dissolveDelayInSeconds","contractAddress","deployed","howItWorks","currency","daiContract","deployButtonDisabled","handleHowItWorks","bind","handleSetCurrency","event","console","log","target","value","drizzle","web3","daiContracts","eth","net","getId","then","response","setState","handlePayerInput","utils","isAddress","handlePayeeInput","handleValueInput","valueInETH","valueInWei","toWei","toString","handleNumberOfPaymentsInput","handleDissolveDelayInput","delayInDays","delayInSeconds","handleDeployContract","contractIndex","args","alert","progPayContract","Contract","options","contracts","abi","data","bytecode","getAccounts","e","that","deploy","arguments","send","from","newContractInstance","address","catch","err","render","contractURL","parseFloat","fromWei","toFixed","replace"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport \"./app.css\";\nimport HowItWorks from './HowItWorks';\n\nclass Main extends React.Component {\n  constructor(props){\n    super(props);\n    this.state={payer:undefined, payerIsAddress:null, payee:null, payeeIsAddress:null, contractValueInWei:null, numberOfPayments:null, dissolveDelayInSeconds:null, contractAddress:null, deployed:false, howItWorks:false, currency:\"ETH\", daiContract:null, deployButtonDisabled:false};\n    this.handleHowItWorks = this.handleHowItWorks.bind(this);\n    this.handleSetCurrency = this.handleSetCurrency.bind(this);\n  }\n\n  handleSetCurrency (event){\n    console.log(event.target.value);\n    const { drizzle } = this.props;\n    console.log(drizzle);\n    const { web3 } = drizzle;\n    console.log(web3);\n    let currency = event.target.value;\n    let daiContracts = {1:\"0x6B175474E89094C44Da98b954EedeAC495271d0F\", 4:\"0x8ad3aA5d5ff084307d28C8f514D7a193B2Bfe725\", 5777:\"0x0f8a6B96b283a3DDE83ac93193e5022970baC2bE\"};\n    //let { web3 } = this.props.drizzle;\n    web3.eth.net.getId()\n      .then((response)=>{\n        this.setState({currency:currency, daiContract:currency===\"DAI\"?daiContracts[response]:null});\n      });\n\n    //console.log(this.state.currency);\n  }\n\n  handlePayerInput(event){\n    if (this.props.drizzle.web3.utils.isAddress(event.target.value)){\n    this.setState({payer:event.target.value, payerIsAddress:true});\n    } else {\n      this.setState({payerIsAddress:false})\n    console.log(\"PAYER ADDRESS NOT AN ETHEREUM ADDRESS\");\n  }\n    //console.log(this.state.payer);\n  }\n\n  handleHowItWorks(){\n    this.setState({howItWorks:!this.state.howItWorks});\n  }\n\n\n  handlePayeeInput(event){\n    if (this.props.drizzle.web3.utils.isAddress(event.target.value)){\n    this.setState({payee:event.target.value, payeeIsAddress:true});\n  } else {\n    this.setState({payeeIsAddress:false});\n    console.log(\"PAYEE ADDRESS NOT AN ETHEREUM ADDRESS\")\n  }\n    //console.log(this.state.payee);\n  }\n\n  handleValueInput(event){\n    const { web3 } = this.props.drizzle;\n    const valueInETH = event.target.value;\n    if(!valueInETH){\n      return;\n    } else {\n    const valueInWei = web3.utils.toWei((valueInETH).toString(), 'ether');\n    this.setState({contractValueInWei:valueInWei});\n    console.log(valueInWei);\n  }\n\n  }\n\n  handleNumberOfPaymentsInput(event){\n    this.setState({numberOfPayments:event.target.value});\n    //console.log(this.state.payee);\n  }\n\n  handleDissolveDelayInput(event){\n    const delayInDays = event.target.value;\n    const delayInSeconds = delayInDays * 24*60*60;\n    this.setState({dissolveDelayInSeconds:delayInSeconds});\n  }\n\n  handleDeployContract(){\n    const { drizzle } = this.props;\n    console.log(drizzle);\n    const { web3 } = drizzle;\n    console.log(web3);\n\n\n    let contractIndex;\n    let args;\n    if (this.state.currency===\"ETH\"){\n      contractIndex=0;\n      args = [this.state.payer,this.state.payee,this.state.contractValueInWei,this.state.numberOfPayments,this.state.dissolveDelayInSeconds];\n    } else if (this.state.currency===\"DAI\"){\n      if (!this.state.daiContract){\n        alert(\"DecentPay DAI contracts can only be deployed on Mainnet and Rinkeby Networks\");\n        return;\n      }\n      contractIndex=1;\n      args = [this.state.payer,this.state.payee,this.state.contractValueInWei,this.state.numberOfPayments,this.state.dissolveDelayInSeconds, this.state.daiContract];\n    }\n\n    const progPayContract = new web3.eth.Contract(this.props.options.contracts[contractIndex].abi, {data:this.props.options.contracts[contractIndex].bytecode});\n    console.log(progPayContract);\n    console.log(args);\n    web3.eth.getAccounts().then((e) => {\n      var that = this;\n      progPayContract.deploy({arguments:args}).send({\n      from: e[0]\n  }).then(function(newContractInstance){\n      that.setState({deployed:true, contractAddress:newContractInstance.options.address, deployButtonDisabled:true});\n      console.log(newContractInstance.options.address) // instance with the new contract address\n  }).catch(err => alert(\"Error: Not connected to Ethereum\"));\n\n\n\n    });\n\n\n    //web3.eth.getAccounts().then(e => {let firstAcc=e[0]; console.log(firstAcc)});\n\n\n  }\n\n\n  render(){\n    console.log(this.state.deployButtonDisabled);\n    console.log(this.state.currency);\n    console.log(this.state.daiContract);\n    console.log(this.props.drizzle);\n    //console.log(\"opt \"+this.props.options.contracts[0].abi);\n    let contractURL = \"https://decentpay.app/\"+this.state.contractAddress;\n    return (\n\n      <div className=\"container mt-5\">\n      <div className=\"jumbotron\">\n\n      <div>\n      <h2>DecentPay\n      <small className=\"text-muted\"> simple transparent progress payments</small>\n      </h2>\n\n      <p>DecentPay is an <a href=\"https://www.ethereum.org\" target=\"_blank\" rel='noreferrer noopener'>Ethereum </a>powered payment utility that allows two parties to enter into a fully decentralized multi-payment contract.</p>\n\n      {!this.state.deployed &&\n      <div>\n\n    <div className=\"input-group mb-3 input-group-sm\">\n      <div className=\"input-group-prepend\">\n        <span className=\"input-group-text\" id=\"payer\">Payer</span>\n      </div>\n      <input type=\"text\" className=\"form-control\" placeholder=\"0x.......\" aria-label=\"Payer\" aria-describedby=\"payer\" disabled={this.state.deployed?true:false}  onChange={this.handlePayerInput.bind(this)}/>\n    </div>\n    {this.state.payerIsAddress===false &&\n      <div className=\"alert alert-danger p-1\" role=\"alert\">\n        Payer input is not a valid Ethereum address.\n      </div>\n    }\n    <div className=\"input-group mb-3 input-group-sm\">\n      <div className=\"input-group-prepend\">\n        <span className=\"input-group-text\" id=\"payee\">Payee</span>\n      </div>\n      <input type=\"text\" className=\"form-control\" placeholder=\"0x.......\" aria-label=\"Payee\" aria-describedby=\"payee\"  disabled={this.state.deployed?true:false} onChange={this.handlePayeeInput.bind(this)}/>\n    </div>\n    {this.state.payeeIsAddress===false &&\n      <div className=\"alert alert-danger p-1\" role=\"alert\">\n        Payee input is not a valid Ethereum address.\n      </div>\n    }\n    <div className=\"input-group mb-3 input-group-sm\">\n      <div className=\"input-group-prepend\">\n        <span className=\"input-group-text\" id=\"value\">Contract Value &nbsp;&nbsp;&nbsp;&nbsp;{this.state.currency===\"DAI\"?\"$\":\"\"}</span>\n      </div>\n      <input className=\"form-control input-group-sm\" placeholder=\"0\" aria-label=\"Contract Value\" aria-describedby=\"value\"  type=\"number\" disabled={this.state.deployed?true:false}  onChange={this.handleValueInput.bind(this)}/>\n      {this.state.currency===\"ETH\" &&\n      <div className=\"input-group-append\">\n        <span className=\"input-group-text\">Ξ</span>\n      </div>\n    }\n    </div>\n    <div className=\"input-group mb-3 input-group-sm\">\n      <div className=\"input-group-prepend\">\n        <span className=\"input-group-text\" id=\"numPay\">Payments</span>\n      </div>\n      <input className=\"form-control\" placeholder=\"0\" aria-label=\"Contract Value\" aria-describedby=\"numPay\"  type=\"number\" disabled={this.state.deployed?true:false} onChange={this.handleNumberOfPaymentsInput.bind(this)}/>\n    </div>\n    <div className=\"input-group mb-3 input-group-sm\">\n      <div className=\"input-group-prepend\">\n        <span className=\"input-group-text\" id=\"dissolve\">Dissolve Delay</span>\n      </div>\n      <input className=\"form-control\" placeholder=\"Days\" aria-label=\"Contract Value\" aria-describedby=\"dissolve\"  type=\"number\" disabled={this.state.deployed?true:false} onChange={this.handleDissolveDelayInput.bind(this)}/>\n    </div>\n\n    <div className=\"container text-center\">\n    <div className=\"row\">\n    <div className=\"form-check col-sm\">\n\n      <label className=\"form-check-label\" >\n      <input className=\"form-check-input\" type=\"radio\" name=\"CurrencyRadio\" value=\"ETH\" onChange={this.handleSetCurrency}/>\n      Ethereum\n      </label>\n    </div>\n    <div className=\"form-check col-sm\">\n\n      <label className=\"form-check-label\" >\n      <input className=\"form-check-input\" type=\"radio\" name=\"CurrencyRadio\" value=\"DAI\" onChange={this.handleSetCurrency}/>\n      DAI\n      </label>\n    </div>\n    <div className=\"form-check disabled col-sm\">\n      <input className=\"form-check-input\" type=\"radio\" name=\"CurrencyRadio\" value=\"USDC\" disabled/>\n      <label className=\"form-check-label\" >\n      USDc\n      </label>\n    </div>\n    </div>\n    </div>\n    <br/>\n\n\n\n\n\n\n\n      <button type=\"button\" className=\"btn shadow-lg btn-primary btn-lg btn-block\" onClick={this.handleDeployContract.bind(this)} disabled={!(this.state.payer && this.state.payee && this.state.contractValueInWei && this.state.numberOfPayments && this.state.dissolveDelayInSeconds)||this.state.deployButtonDisabled?true:false}>{!this.state.deployButtonDisabled?'Deploy Contract':'Processing'}</button>\n      <br/>\n      </div>\n    }\n\n\n    {this.state.deployed &&\n    <div>\n    <hr/>\n    <p> Congrats! Your contract has been successfully deployed!</p>\n    <p> Here are your contract details:</p>\n    <ul>\n    <li>Currency: {this.state.currency}</li>\n    <li>Payer: {this.state.payer}</li>\n    <li>Payee: {this.state.payee}</li>\n    <li>Contract Value: {this.state.currency===\"DAI\"?\"$\":\"\"}{parseFloat((this.props.drizzle.web3.utils.fromWei((this.state.contractValueInWei).toString(), 'ether'))).toFixed(3)}{this.state.currency===\"ETH\"?\"Ξ\":\"\"}</li>\n    <li>Number of Payments: {this.state.numberOfPayments}</li>\n    <li>Cool Down Timer: {(this.state.dissolveDelayInSeconds/60/60/24).toFixed(1).replace(/[.,]0$/, \"\")} day{this.state.dissolveDelayInSeconds/60/60/24===1?\"\":\"s\"}</li>\n    </ul>\n\n    <p>Your contract address is: {this.state.contractAddress}</p>\n    <p>Both parties will interact with the contract using this dashboard link is: <br/><br/><a className=\"btn btn-primary btn-small\" role=\"button\" href={\"./\"+this.state.contractAddress}>{contractURL}</a></p>\n    <p><b>Please copy the above infomation and store in a safe place!</b> Once you've done that follow the link above to start interacting with your contract.</p>\n\n    </div>\n    }\n\n    <div className=\"text-center\">\n\n    <button type=\"button\" className=\"btn btn-outline-primary btn-sm\" onClick={this.handleHowItWorks}>How It Works</button>\n\n    </div >\n      {this.state.howItWorks &&\n        <HowItWorks />\n    }\n\n    </div>\n    </div>\n    </div>\n    )\n  }\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}